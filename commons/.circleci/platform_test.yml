jobs:
  tf-test:
    parameters:
      appName:
        type: string
      target-env:
        type: string
    executor:
      name: terraform/default
      tag: 1.2.7
    steps:
      - checkout
      - terraform/fmt:
          path: infrastructure/<<parameters.appName>>/<<parameters.target-env>>
          recursive: true
      - terraform/validate:
          path: infrastructure/<<parameters.appName>>/<<parameters.target-env>>
          recursive: true
      - persist_to_workspace:
          root: .
          paths:
            - .